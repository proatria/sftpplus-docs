## More info about the config file at
# https://docs.netlify.com/configure-builds/file-based-configuration
#
[build]
  # Directory to change to before starting a build.
  # If not set, defaults to the root directory.
  base = ""

  # Directory that contains the deploy-ready HTML files and assets generated by
  # the build. This is relative to the base directory if one has been set, or the
  # root directory if a base has not been set. This sample publishes the
  # directory located at the absolute path "root/project/build-output"
  publish = "deploy/"

  # Default build command.
  # See the available default environment variables
  # https://docs.netlify.com/configure-builds/environment-variables/#netlify-configuration-variables
  # Netlify will auto install the deps.
  # https://docs.netlify.com/configure-builds/manage-dependencies/#python
  # https://github.com/netlify/build-image/blob/focal/included_software.md
  command = "sphinx-build -b html -D html_theme=integrated doc_source/ deploy"

[build.processing.html]
  # The automatic redirection from /path/folder-> /path/folder/ is disabled
  # as it break the proxy for the documentation.
  pretty_urls = true


[build.environment]
  GIT_LFS_ENABLED = "True"
  SFTPPLUS_TARGET = "production"
  PYTHON_VERSION = "2.7"

[context.production.environment]
  SFTPPLUS_TARGET = "production"


[context.deploy-preview.environment]
  SFTPPLUS_TARGET = "dev"


# Generic rules for any branch.
[context.branch-deploy.environment]
  SFTPPLUS_TARGET = "production"


# Rules for staging branch.
[context.staging.environment]
  SFTPPLUS_TARGET = "production"

[[redirects]]
  from = "/static/*"
  to = "https://www.sftpplus.com/static/:splat"
  status = 301
  force = true
